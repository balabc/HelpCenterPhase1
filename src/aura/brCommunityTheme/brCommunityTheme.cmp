<aura:component implements="forceCommunity:themeLayout" access="global" description="Custom Theme Layout for Community pages">
    <aura:attribute name="isAltMainNav" type="Boolean" default="false"/>
    <aura:attribute name="askbutton" type="Aura.Component[]" required="false"/>
    <aura:attribute name="search" type="String" default="initialize"/>
    <aura:attribute name="isReady" type="Boolean" default="false"/>
    <aura:attribute name="isPhone" type="Boolean" default="false"/>
    <aura:attribute name="isSmallDevice" type="Boolean" default="false"/>
    <aura:attribute name="isResize" type="Boolean" default="false"/>

    <aura:registerEvent name="brToggleSearchModalEventHandler" type="c:brToggleSearchModalEvent"/>
    <aura:registerEvent name="brCloseAllNavMenuEventHandler" type="c:brCloseAllNavMenuEvent"/>
    <aura:handler event="c:brChangeHeaderSearchBarEvent" action="{!c.changeSearch}"/>

    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>

    <ltng:require styles="{!join(',', $Resource.BigcommerceCommunity + '/css/styles.css', $Resource.BigcommerceCommunityStyles)}" /><!-- TODO add Resource value provider-->

    <div style="{!v.isReady?'display:block;':'display:none;'}">

        <aura:if isTrue="{!$Browser.formFactor == 'PHONE'}">
            <c:brMobileNavMenu askbutton="{!v.askbutton}"/>
        </aura:if>

        <c:brSearchModal search="{!v.search}" />

        <div class="body-inner main-content" onclick="{!c.closeUserMenu}">
            <div class="wrapper-for-sticky-footer-structure bg-x3lightgrey">

                <aura:if isTrue="{!$Browser.formFactor == 'DESKTOP' || $Browser.formFactor == 'TABLET'}">
                    <c:brThemeHeader aura:id="brThemeHeader" isAltMainNav="{!v.isAltMainNav}" askbutton="{!v.askbutton}" search="{!v.search}"/>
                </aura:if>

                <aura:if isTrue="{!$Browser.formFactor == 'PHONE'}">
                    <c:brHeaderMobile aura:id="brHeaderMobile"/>
                </aura:if>

                    {!v.body}

                <div class="empty-block-for-sticky-footer"></div><!-- do not remove this empty element -->
            </div><!-- / .wrapper-for-sticky-footer-structure -->
            <aura:if isTrue="{!or($Browser.formFactor == 'PHONE',v.isSmallDevice)}">
                <c:brThemeFooter aura:id="themeFooterMobile" isPhone="{!true}" isResize="{!v.isResize}"  />
            </aura:if>
        </div><!-- / .body-inner -->
        <aura:if isTrue="{!and(or($Browser.formFactor == 'DESKTOP',$Browser.formFactor == 'TABLET'),not(v.isSmallDevice))}">
            <c:brThemeFooter aura:id="themeFooter" isPhone="{!false}" isResize="{!v.isResize}"/>
        </aura:if>
    </div>
</aura:component>